<% if @ok %>
  <% expanded = false %>
  <% if [ButtonDestinations::EXPANDED_MEDIA_ELEMENT, ButtonDestinations::EXPANDED_MEDIA_ELEMENT_IN_DASHBOARD].include?(@destination) %>
    <% expanded = true %>
    var target = $('#media_element_expanded_<%= @media_element_id %>');
  <% elsif @destination == ButtonDestinations::COMPACT_MEDIA_ELEMENT %>
    var target = $('#media_element_compact_<%= @media_element_id %>');
  <% end %>
  
  <%
    where = @where
    where = 'dashboard' if [ButtonDestinations::POPUP_MEDIA_ELEMENT_IN_DASHBOARD, ButtonDestinations::EXPANDED_MEDIA_ELEMENT_IN_DASHBOARD].include?(@destination)
  %>
  
  target.html("<%= escape_javascript(render(:partial => "media_elements/view_single", :locals => {:media_element => @media_element, :expanded => expanded, :where => where})) %>");
<% else %>
  showErrorPopUp('<%= @error %>', 'Error!!');
<% end %>
