<%
  my_title = document.title
  my_title = my_title.gsub(/(#{word})/i) { |s| "<b style=\"text-decoration:underline\">#{s}</b>" } if !word.blank?
  popup_description = document.description
  popup_description = t('documents.description_placeholder', :num => t('language_parameters.document.length_description')) if popup_description.blank?
%>

<div id="document_<%= document.id %>" class="boxViewSingleDocument">
  
  <div class="contentInterno">
    <div class="documentsIcon">
      <%= image_tag document.icon_path, :class=> "fltlft", :title => document.icon_title %>
      <h3><%= my_title.html_safe %></h3>
    </div>
     <p><%= document.size_and_extension %></p>
    <div class="menuController buttons">
      <a title="<%= t('titles.buttons.documents.download') %>" data-document-id="<%= document.id %>" class="preview"></a>
      <a title="<%= t('titles.buttons.documents.destroy') %>" data-used-in-your-lessons="<%= document.used_in_your_lessons? %>" data-document-id="<%= document.id %>" class="destroy"></a>
    </div>
  </div>
  
  <div class="documentInfoPopUp" id="dialog-document-<%= document.id %>" style="display:none;">
    <div class="documentPopUpContainer" style="display:inline-block">
      <div class="cols fltlft">
        <%= image_tag document.icon_path %>
      </div>
      <div class="cols fltrt" style="text-align:right; margin-top:1.250em">
        <%= document.size_and_extension %>
      </div>
      <br class="clearfloat">
      <%= form_tag document_path(document.id), :class => 'formDocuments', :remote => true do %>
        <input class="_doc_title" type="text" value="<%= document.title %>" name="title" data-document-id="<%= document.id %>">
        <p>
          <textarea class="_doc_description" name="description" data-document-id="<%= document.id %>"><%= popup_description %></textarea>
        </p>
        <%= hidden_field_tag 'description_placeholder', (document.description.blank? ? '1' : ''), :class => '_doc_description_placeholder' %>
        <br>
        <div class="fltrt" style="margin-top:5px">
          <a class="lower buttonForm _download" data-document-id="<%= document.id %>"><%= t('documents.download') %></a>
        </div>
      <% end %>
    </div>
    <div class="menuPopUp">
      <div class="menuIconButton" style="float:right">
        <a class="close _close_document_preview_popup" data-document-id="<%= document.id %>" title="<%= t('titles.close') %>"></a>
      </div>
    </div>
  </div>
  
</div>
