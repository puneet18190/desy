<% if @ok %>
  var to_be_moved = $('#slide_in_lesson_editor_<%= @current_slide.id %>');
  var old_position = to_be_moved.data('position');
  var html_to_move = to_be_moved[0].outerHTML;
  to_be_moved.remove();
  var target_slide = $('ul#slides li:nth-child(<%= @position %>)');
  if(old_position > <%= @position %>) {
    target_slide.before(html_to_move);
  } else {
    target_slide.after(html_to_move);
  }
  reInitializeSlidePositionsInLessonEditor();
  $("nav#heading").html("<%= j(render :partial => 'index_nav', :locals => {:slides => @slides, :with_current => false})%>");
  initializeSortableNavs();
  slideTo(<%= @current_slide.id %>);
<% else %>
  slideError();
<% end %>
