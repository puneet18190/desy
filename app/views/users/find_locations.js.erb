<% first_depth = @parent.depth + 1 %>
$('._location_select_box').each(function() {
  $('#' + $(this).attr('id')).selectbox('detach');
});
<% ((first_depth + 1)...(SETTINGS['location_types'].length)).to_a.each do |depth| %>
  $('select#<%= SETTINGS["location_types"][depth].downcase %>_id').html('');
<% end %>
$('select#<%= SETTINGS["location_types"][first_depth].downcase %>_id').html('<%= j render(:partial => "users/locations_list", :locals => {:locations => @locations, :selected => nil, :edit => false, :label => Location.label_at(first_depth)}) %>');
$('._location_select_box').each(function() {
  $('#' + $(this).attr('id')).selectbox();
});
