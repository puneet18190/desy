<div class="griglia-contenuti">
  <div class="profile-content">
    <%= render :partial => 'users/title_bar', :locals => {:classes => ['', 'current', '', '', '']} %>
    <br class="clearfloat">
    <div class="contentFormInProfile">
      <header>
        <h2><%= t('users.subjects.title') %></h2>
        <p><%= t('users.subjects.description') %></p>
      </header>
      <%= form_tag user_subjects_path, :method => :put, :autocomplete => 'off' do %>
        <div id="profile-subjects-edit" class="profile-element-container">
          <% @subjects.each do |cathegory| %>
            <div class="profile-subject-cathegory-container">
              <div class="profile-subject-cathegory-label">
                <%= cathegory[:label].present? ? cathegory[:label] : (@subjects.first[:label].blank? ? '' : t('users.subjects.no_cathegory')) %>
              </div>
              <% cathegory[:items].each do |subject| %>
                <% html_id = "users_subject_ids_#{subject.id}" %>
                <div class="profile-element">
                  <%= check_box_tag 'user[subject_ids][]', subject.id, @user.users_subjects.map(&:subject_id).include?(subject.id), id: html_id, class: 'regular-checkbox big-checkbox' %>
                  <%= label_tag html_id, '' %>
                  <span><%= subject.to_s %></span>
                </div>
              <% end %>
            </div>
          <% end %>
          <br class="clearfloat"/>
          <ul class="profile-errors">
            <% @errors.each do |err| %>
              <li><%= err %></li>
            <% end %>
          </ul>
        </div>
        <div class="form_submit">
          <input type="submit" value="<%= t('users.subjects.save') %>"/>
        </div>
      <% end %>
    </div>
  </div>
</div>
