<div class="griglia-contenuti">
  <div class="profile-content">
    <%= render :partial => 'users/title_bar', :locals => {:classes => ['current', '', '', '', '']} %>
    <br class="clearfloat">
    <div class="contentFormInProfile">
      <header>
        <h2><%= t('users.info.title') %></h2>
        <p><%= t('users.info.description') %></p>
      </header>
      <%= form_tag user_path, :method => :put do %>
        
        <div id="profile-general-edit" class="profile-element-container">
          <div class="profile-element">
            <%= t('users.info.attributes.name') %><br/>
            <%= text_field_tag :name %>
          </div>
          <div class="profile-element">
            <%= t('users.info.attributes.surname') %><br/>
            <%= text_field_tag :surname %>
          </div>
          <div class="profile-element">
            <%= t('users.info.attributes.email') %><br/>
            <%= text_field_tag, :disabled => true %>
          </div>
          <br class="clearfloat"/>
          <div class="profile-element">
            <%= t('users.info.attributes.new_password') %><br/>
            <%= password_field_tag :password %>
          </div>
          <div class="profile-element">
            <%= t('users.info.attributes.new_password_confirmation') %><br/>
            <%= password_field_tag :password_confirmation %>
          </div>
          <ul class="listaErrori">
            <% @errors[:general].each do |err| %>
              <li><%= err %></li>
            <% end %>
          </ul>
        </div>
        
        <div id="profile-locations-edit" class="profile-element-container">
          <%
            disabling = !@forced_location.nil?
            forced_ancestors = (@forced_location.ancestors + [@forced_location]) if disabling
          %>
          <% SETTINGS['location_types'].each_with_index do |location, index| %>
            <%
              is_last = (index == SETTINGS['location_types'].length - 1)
              my_own_locations = @locations[index].nil? ? {:selected => 0, :content => []} : @locations[index]
            %>
            <div class="inputElement">
              <div class="_location_selector">
                <%= Location.label_at(index) %><br>
                <% if disabling %>
                  <div class="sbHolderDeselect" id="<%= location.downcase %>_id"><%= forced_ancestors[index].name %></div>
                <% else %>
                  <select id="<%= location.downcase %>_id" class="_location_select_box" data-is-last="<%= is_last %>" name="location[<%= location.downcase %>]">
                    <%= render :partial => 'users/locations_list', :locals => {:locations => my_own_locations[:content], :selected => my_own_locations[:selected], :label => (my_own_locations[:content].any? ? Location.label_at(index) : nil)} %>
                  </select>
                <% end %>
              </div>
            </div>
            <% disabling = false if disabling && @forced_location.sti_type == location %>
          <% end %>

          <% if @forced_location && @forced_location.sti_type == SETTINGS['location_types'].last %>
            <input id="user_location_id" type="hidden" value="<%= @forced_location.id %>" name="user[location_id]">
          <% end %>
        </div>







<fieldset class="insert-content">
  
  <div class="inputElement">
    <%= t('users.info.attributes.school_level_id') %><br>
    <%= f.select :school_level_id, @school_level_ids %>
  </div>
  <br class="clearfloat">
  
</fieldset>

<br/><br/>

<hr>
        
        
        
        
        
        
        
        
        
        
        <div class="form_submit">
          <%= f.submit t('users.info.save') %>
        </div>
      <% end %>
    </div>
  </div>
</div>
