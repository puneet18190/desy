<fieldset class="insert-content">
  <div class="inputElement">
    <%= t('users.info.attributes.name') %><br>
    <%= f.text_field :name, class: 'text' %>
  </div>
  <div class="inputElement">
    <%= t('users.info.attributes.surname') %><br>
    <%= f.text_field :surname, class: 'text' %>
  </div>
  <div class="inputElement">
    <%= t('users.info.attributes.email') %><br>
    <%= f.email_field :email, class: 'text', disabled: !@user.new_record? %>
  </div>
  <br class="clearfloat" />
  <div class="inputElement">
    <% if @user.new_record? %>
      <%= t('users.info.attributes.password') %>
    <% else %>
      <%= t('users.info.attributes.new_password') %>
    <% end %>
    <br />
    <%= f.password_field :password, class: 'text' %>
  </div>
  <div class="inputElement" style="margin-right:0">
    <% if @user.new_record? %>
      <%= t('users.info.attributes.password_confirmation') %>
    <% else %>
      <%= t('users.info.attributes.new_password_confirmation') %>
    <% end %>
    <br>
    <%= f.password_field :password_confirmation, class: 'text' %>
  </div>
  <br class="clearfloat">
  
  <%# ERRORI %>
  <% errors = @user.errors.select{ |k,_| [:name, :surname, :email, :password, :password_confirmation].include? k } -%>

  <ul class="listaErrori">
  <% errors.each do |k, v| -%>
    <li><%= @user.errors.full_message(k, v) %></li>
  <% end if errors.present? -%>
  </ul>
</fieldset>
<hr>
<fieldset class="insert-content">
  
  <div class="inputElement">
    <%= t('users.info.attributes.province') %><br>
    <select id="province_id">
      <% unless current_user %>
        <option value=''>
          <%= t('prelogin.sign_up.select_a')%> <%= t('users.info.attributes.province')%>
        </option>
      <% end %>
      <%= options_for_select(@provinces_ids, current_user.present? ? current_user.location.try(:root_id) : '') %>
    </select>
  </div>
  <div class="inputElement">
    <%= t('users.info.attributes.town') %><br>
    <select id="town_id">
      <% if current_user %>
        <%= render :partial => 'users/locations_list', :locals => {:parent => current_user.location.try(:root_id), :selected => current_user.location.try(:parent_id)} %>
      <% end %>
    </select>
  </div>
  <div class="inputElement">
    <%= t('users.info.attributes.school') %><br>
    <select id="user_location_id" name="user[location_id]">
      <% if current_user %>
        <%= render :partial => 'users/locations_list', :locals => {:parent => current_user.location.try(:parent_id), :selected => current_user.try(:location_id)} %>
      <% end %>
    </select>
  </div>
  <br class="clearfloat" />
  <div class="inputElement">
    <%= t('users.info.attributes.school_level_id') %><br>
    <%= f.select :school_level_id, @school_level_ids %>
  </div>
  <br class="clearfloat">

  <%# ERRORI %>
  <% errors = @user.errors.select{ |k,_| [:school, :school_level_id, :location_id].include? k } -%>

  <ul class="listaErrori">
  <% errors.each do |k, v| -%>
    <li><%= @user.errors.full_message(k, v) %></li>
  <% end if errors.present? -%>
  </ul>
</fieldset>
<hr>
