<%
  display_docs = (documents_slides.length >= 3 || documents.empty?) ? ['none', 'block'] : ['block', 'none']
%>

<div id="document_gallery" class="document_gallery document-kind">
  
  <div id="current_inputs_for_documents" style="display:none">
    <% i = 1 %>
    <% documents_slides.each do |ds| %>
      <input type="text" name="document_<%= i %>" value="<%= ds.document_id %>" />
      <% i += 1 %>
    <% end %>
  </div>
  <div id="previous_inputs_for_documents" style="display:none">
    <% i = 1 %>
    <% documents_slides.each do |ds| %>
      <input type="text" name="document_<%= i %>" value="<%= ds.document_id %>" />
      <% i += 1 %>
    <% end %>
  </div>
  
  <div class="attachedExternal">
    <div class="attachedInternal">
      <%= render :partial => 'lesson_editor/documents_in_slide', :locals => {:documents_slides => documents_slides, :slide_id => nil} %>
    </div>
  </div>
  
  <div class="documentsExternal">
    <div class="for-scroll-pain" style="display:<%= display_docs[0] %>">
      <% documents.each_with_index do |document, index| %>
        <%= render :partial => 'galleries/thumbs/document', :locals => {:document => document, :index => index, :disabled => documents_slides.pluck(:document_id).include?(document.id), :attached => nil, :hidden => false, :slide_id => nil} %>
      <% end %>
    </div>
    <div id="empty_document_gallery" style="display:<%= display_docs[1] %>">
      <div class="bigDocumentIcon"></div>
      <br class="clearfloat"/>
      <% if documents.empty? %>
        <p><%= t('galleries.empty.document') %></p>
      <% else %>
        <p><%= t('galleries.documents.locked') %></p>
      <% end %>
    </div>
  </div>
  
  <div class="documentsFooter">
    <div class="triangolo"></div>
    <div class="footerLeft">
      <p class="filterBy lower"><%= t('galleries.documents.filter_by') %></p>
      <input id="document_gallery_filter" type="text" value="" class="filterByInput" data-letters="0" style="color:#999">
      <%= image_tag 'cerca_documenti.gif', :class => '_loader', :style => 'display:none; float:right' %>
    </div>
    <div class="footerButtons">
      <div class="lower cancel button"><%= t('galleries.documents.cancel') %></div>
      <div class="lower attach button"><%= t('galleries.documents.done') %></div>
    </div>
  </div>
  
</div>
