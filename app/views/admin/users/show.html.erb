<div class="row-fluid">
  <div class="span12">
    <h3><%= @user.name %> <%= @user.surname %></h3>
  </div>
</div>
<div class="row-fluid">
  <div class="span12">
    <table class="table table-striped table-bordered table-rounded">
      <thead>
        <tr>
          <th><%= t('admin.users.fields.id') %></th>
          <th><%= t('admin.users.fields.email') %></th>
          <th><%= t('admin.users.fields.school') %></th>
          <th><%= t('admin.users.fields.location') %></th>
          <th><%= t('admin.users.fields.created') %></th>
          <th><%= t('admin.users.fields.update') %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
          <tr>
            <td><%= @user.id %></td>
            <td><%= link_to @user.email, "mailto:#{@user.email}"%></td>
            <td><%= @user.school %> (<%= @user.school_level.description %>)</td>
            <td><%= @user.province %> - <%= @user.town %></td>
            <td><%= @user.created_at.strftime('%d-%m-%Y')%></td>
            <td><%= @user.updated_at.strftime('%d-%m-%Y')%></td>
            <td>
              <div class="btn-group pull-right">
                <% if @user.active %>
                  <%= link_to "<i class='icon-ban-circle _show_status _show_ban'></i> ".html_safe + t('admin.users.ban').downcase, "/admin/user/#{@user.id}/ban", :method => :put, :class => 'btn btn-small' %>
                <% else %>
                  <%= link_to "<i class='icon-ok _show_status _show_active'></i> ".html_safe + t('admin.users.activate').downcase, "/admin/user/#{@user.id}/activate", :method => :put, :class => 'btn btn-small' %>
                <% end %>
                <%= link_to "<i class='icon-envelope'></i> ".html_safe + t('admin.users.message').downcase, "/admin/messages/new_notification?users=#{@user.id}", :class => 'btn btn-small' %>
                <%= link_to "<i class='icon-remove'></i>".html_safe + t('admin.users.delete').downcase, admin_user_path, :method => :delete, :confirm => t('admin.general.ask_for_delete'), :class => 'btn btn-small' %>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row-fluid">
  <div class="span12">
    <h4><%= t('admin.users.statistics.title') %></h4>
  </div>
</div>
<div class="row-fluid">
  <div class="span6 widget">
    <table class="table white">
      <thead>
        <th><h4><%= t('admin.users.statistics.lessons.title') %></h4></th>
      </thead>
      <tbody>
        <tr class="lesson_stat">
          <td><%= t('admin.users.statistics.lessons.created') %></td>
          <td width="50"><span class="counter-label lessons"><%= format('%02d', @my_created_lessons) %></span></td>
        </tr>
        <tr class="lesson_stat">
          <td><%= t('admin.users.statistics.lessons.copied') %></td>
          <td width="50"><span class="counter-label lessons"><%= format('%02d', @my_copied_lessons) %></span></td>
        </tr>
        <tr>
          <table class="table white">
            <thead>
              <th><h4><%= t('admin.users.statistics.likes') %></h4></th>
            </thead>
            <tbody>
              <% @my_liked_lessons.each do |liked| %>
                <tr>
                  <td><%= liked.title %></td>
                  <td width="50"><span class="counter-label lessons"><%= format('%02d', liked.likes_count) %></span></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="span6 widget">
    <table class="table white">
      <thead>
        <th><h4><%= t('admin.users.statistics.media_elements.title') %></h4></th>
      </thead>
      <tbody>
        <tr>
          <td><%= t('admin.users.statistics.media_elements.loaded') %></td>
          <td width="50"><span class="counter-label elements"><%= format('%02d', @my_created_elements) %></span></td>
        </tr>
      </tbody>
    </table>
    <table class="table white">
      <thead>
        <th><h4><%= t('admin.users.statistics.other.title') %></h4></th>
      </thead>
      <tbody>
        <tr>
          <td><%= t('admin.users.statistics.other.likes') %></td>
          <td width="50"><span class="counter-label"><%= format('%02d', @my_likes_count) %></span></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="row-fluid">
  <div class="span12">
    <h4><%= t('admin.users.lessons', :user => @user.full_name) %></h4>
    <%= render :partial => 'admin/lessons/list', :locals => {:lessons => @user_lessons} %>
  </div>
</div>
<div class="row-fluid">
  <div class="span12">
    <h4><%= t('admin.users.media_elements', :user => @user.full_name) %></h4>
    <%= render :partial => 'admin/elements/list', :locals => {:elements => @user_elements} %>
  </div>
</div>
