<%= render :partial => 'menu', :locals => {:current => 'locations'} %>

<h3>Locations!</h3> <!-- TODO traduzz -->


<table class="outer_locations table table-striped table-bordered table-rounded">
  <tbody>
    <tr>
      <% (0...(SETTINGS['location_types'].length)).to_a.each do |i| %>
        <th>
          <%= Location.label_at(i) %>
        </th>
      <% end %>
    </tr>
    <tr>
      <% SETTINGS['location_types'].each_with_index do |location, index| %>
        <td>
          <% if !@locations[index].nil? %>
            <table class="inner_locations">
              <% @locations[index][:content].each do |l| %>
                <tr id="admin_location_<%= l.id %>" class="<%= (l.id == @locations[index][:selected]) ? 'on' : 'off' %>">
                  <td>
                    <input class="name_write" type="text" style="display:none" value="<%= l.name %>">
                    <span class="name_readonly"><%= l.name %></span>
                  </td>
                  <td>
                    <input class="code_write" type="text" style="display:none" value="<%= l.code %>">
                    <span class="code_readonly"><%= l.code.present? ? code : 'null' %></span>
                  </td>
                  <td>
                    <a class="edit_admin_location" data-location-id="<%= l.id %>">edit</a> <!-- TODO traduzz -->
                    <%= link_to 'done', '/admin/settings/locations/:id/update', :class => 'edit_admin_location_done', :style => 'display:none', :remote => true %> <!-- TODO traduzz -->
                  </td>
                  <td>
                    <%= link_to 'expand', "/admin/settings/locations?selected=#{l.id}" %> <!-- TODO traduzz -->
                  </td>
                </tr>
              <% end %>
            <% end %>
          </table>
        </td>
      <% end %>
    </tr>
  </tbody>
</table>
