<h3><%= t('admin.dashboard.title') %></h3>
<div class="row-fluid">
  <div class="span6">
    <div class="row-fluid">
      <div class="span12 widget">
        <table class="table">
          <thead>
            <th><h4><%= t('admin.dashboard.general.title') %></h4></th>
            <th></th>
          </thead>
          <tbody>
            <tr>
              <td><%= t('admin.dashboard.general.shared_lessons') %></td>
              <td width="50"><span class="counter-label lessons"><%= format('%02d', @all_shared_lessons) %></span></td>
            </tr>
            <tr>
              <td><%= t('admin.dashboard.general.shared_media_elements') %></td>
              <td width="50"><span class="counter-label elements"><%= format('%02d', @all_shared_elements) %></span></td>
            </tr>
            <tr>
              <td><%= t('admin.dashboard.general.total_users') %></td>
              <td width="50"><span class="counter-label"><%= format('%02d', @all_users) %></span></td>
            </tr>
            <tr>
              <table class="table">
                <thead>
                  <th><h4><%= t('admin.dashboard.likes.lessons') %></h4></th>
                  <th></th>
                </thead>
                <tbody>
                  <% @all_liked_lessons.each do |liked| %>
                    <tr>
                      <td><%= liked.title %></td>
                      <td width="50"><span class="counter-label lessons"><%= format('%02d', liked.likes_count) %></span></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </tr>
            <tr>
              <table class="table">
                <thead>
                  <th><h4><%= t('admin.dashboard.likes.users') %></h4></th>
                  <th></th>
                </thead>
                <tbody>
                  <% @all_users_like.each do |u| %>
                    <tr>
                      <td><%= u.name %> <%= u.surname %></td>
                      <td width="50"><span class="counter-label"><%= format('%02d', u.likes_count) %></span></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </tr>
            <tr>
              <table class="table" style="margin-bottom:0">
                <thead>
                  <th><h4><%= t('admin.dashboard.users.new') %></h4></th>
                  <th></th>
                </thead>
                <tbody>
                  <% @users.each do |user| %>
                    <tr>
                      <td><%= link_to "#{user.name} #{user.surname}", admin_user_path(user) %></td>
                      <td style="text-align:right"><span class="counter-label"><%= TimeConvert.to_string user.created_at %></span></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="span6">
    <div class="row-fluid">
      <div class="span12 widget">
        <table class="table" style="margin-bottom:0">
          <thead>
            <th colspan="2"><h4><%= t('admin.dashboard.subjects') %></h4></th>
          </thead>
          <tbody>
            <tr>
              <td>
                <% (0..@all_subjects_chart.length - 1).each do |index| %>
                  <blockquote class="legend" style="border-color: <%= Subject.chart_colors[index] %>">
                    <div class="pull-left"><%= @all_subjects_desc[index] %></div>
                    <div class="pull-right"><%= @all_subjects_chart[index] %></div>
                  </blockquote>
                <% end %>
              </td>
              <td><span class="pie" data-text="<%= @all_subjects_desc %>" data-diameter="250" class="fltrt"><%= @all_subjects_chart.to_s[1..-2].gsub('"','') %></span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span6 widget">
        <h4><%= t('admin.messages.reports.media_elements') %></h4>
        <% if @elements_reports.any? %>
          <% @elements_reports.each do |report| %>
            <a href="/admin/media_elements?utf8=âœ“&search%5Bid%5D=<%= report.reportable.id %>#list-anchor">
              <blockquote class="elements">
                <div class="pull-right date-label elements">
                  <%= TimeConvert.to_string report.created_at %>
                </div>
                <%= report.user.full_name %><br/>
                <b><%= t('admin.messages.reports.item') %></b> <%= report.reportable.title %><br/>
                <b><%= t('admin.messages.reports.report') %></b> <i><%= report.comment %></i>
              </blockquote>
            </a>
          <% end %>
        <% else %>
          <%= t('admin.messages.reports.empty.media_elements') %>
        <% end %>
      </div>
      <div class="span6 widget">
        <h4><%= t('admin.messages.reports.lessons') %></h4>
        <% if @lessons_reports.any? %>
          <% @lessons_reports.each do |report| %>
            <a href="/admin/lessons?utf8=âœ“&search%5Bid%5D=<%= report.reportable.id %>#list-anchor">
              <blockquote class="lessons">
                <div class="pull-right date-label lessons">
                  <%= TimeConvert.to_string report.created_at %>
                </div>
                <%= report.user.full_name %><br/>
                <b><%= t('admin.messages.reports.item') %></b> <%= report.reportable.title %><br/>
                <b><%= t('admin.messages.reports.report') %></b> <i><%= report.comment %></i>
              </blockquote>
            </a>
          <% end %>
        <% else %>
          <%= t('admin.messages.reports.empty.lessons') %>
        <% end %>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span12 widget">
        <table class="table" style="margin-bottom:0">
          <thead>
            <th colspan="2"><h4><%= t('admin.dashboard.hard_disk.title') %></h4></th>
          </thead>
          <tbody>
            <tr>
              <td>
                <blockquote class="legend" style="border-color:blue">
                  <div class="pull-left"><%= t('admin.dashboard.hard_disk.images') %></div>
                  <div class="pull-right"><%= 4444 %></div>
                </blockquote>
                <blockquote class="legend" style="border-color:green">
                  <div class="pull-left"><%= t('admin.dashboard.hard_disk.audios') %></div>
                  <div class="pull-right"><%= 4444 %></div>
                </blockquote>
                <blockquote class="legend" style="border-color:yellow">
                  <div class="pull-left"><%= t('admin.dashboard.hard_disk.videos') %></div>
                  <div class="pull-right"><%= 4444 %></div>
                </blockquote>
                <blockquote class="legend" style="border-color:red">
                  <div class="pull-left"><%= t('admin.dashboard.hard_disk.remaining') %></div>
                  <div class="pull-right"><%= 4444 %></div>
                </blockquote>
              </td>
              <td><span class="pie" data-text="<%= @all_subjects_desc %>" data-diameter="250" class="fltrt"><%= @all_subjects_chart.to_s[1..-2].gsub('"','') %></span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" charset="utf-8">
  $.fn.peity.defaults.pie = {
    colours: <%= Subject.chart_colors.to_json.html_safe %>,
    diameter: 250
  }
  $('span.pie').peity('pie');
</script>
