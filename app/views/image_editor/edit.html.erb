<%= render :partial => 'image_editor/header', :locals => {:image => @image} %>

<div class="mediaEditorElementContainer image_editor_only" id="image_editor">
  
  <div class="menuLeftEditorElement">
    <h2><%= t('image_editor.left_column.title') %></h2><p><%= t('image_editor.left_column.description') %></p>
    <div class="menuModifyImages">
      <ul>
        <li><a id="image_editor_crop_action" class="do_crop cutButton" title="<%= t('general_titles.crop_element_title') %>"></a></li>
        <li><a id="image_editor_text_action" class="write_text abcButton" title="<%= t('general_titles.add_text_title') %>"></a></li>
      </ul>
    </div>
  </div>
  
  <div id="image_editor_container" class="imagesContainer">
    <div id="image_wrapper">
      <%= image_tag @image.url, :id => "cropped_image", "data-width" => @image.width, "data-height"=>@image.height %>
      <form id="image_editor_form" data-param="<%= @image.id %>" action="" method="post" data-remote="true">
        <input type="hidden" name="x1" value="" class="_coord"/>
        <input type="hidden" name="y1" value="" class="_coord"/>
        <input type="hidden" name="x2" value="" class="_coord"/>
        <input type="hidden" name="y2" value="" class="_coord"/>
        <%= render :partial => 'media_elements/info_form_in_editor/new', :locals => {:sti_type => @image.sti_type } %>
        <% if !@image.is_public %>
          <%= render :partial => 'media_elements/info_form_in_editor/edit', :locals => {:media_element => @image} %>
        <% end %>
      </form>
    </div>
  </div>
  
  <div class="menuBottomEditorElement">
    
    <div id="image_editor_empty_buttons" class="menuTextImages upper">
      <span><%= t('image_editor.select_an_action') %></span>
      <div class="bottoniVerdi fltrt">
        <a class="_undo upper" style="display:none"><%= t('image_editor.undo') %></a>
      </div>
    </div>
    
    <div id="image_editor_crop_buttons" class="menuServiceImages upper" style="display:none">
      <span><%= t('image_editor.crop.instructions') %></span>
      <div class="bottoniVerdi fltrt">
        <a class="_do disabled"><%= t('image_editor.crop.done') %></a>
        <a class="_cancel"><%= t('image_editor.crop.cancel') %></a>
      </div>
    </div>
    
    <div id="image_editor_text_buttons" class="menuServiceImages upper" style="display:none">
      <span><%= t('image_editor.text.instructions') %></span>
      <div class="bottoniVerdi fltrt">
        <a class="_do disabled"><%= t('image_editor.text.done') %></a>
        <a class="_cancel"><%= t('image_editor.text.cancel') %></a>
      </div>
    </div>
    
  </div>
  
  <div class="menuFooterEditorElement _image_editor_bottom_bar">
    <p id="image_editor_real_dimensions"><%= t('image_editor.original_size') %>: <%= @image.width %>x<%= @image.height %>px</p>
    <div class="fltrt">
      <div class="fltrt">
        <a id="commit_image_editor" class="nextButton <%= @image.is_public ? '' : '_with_choice'.html_safe %>" title="<%= t('general_titles.save_element_title') %>"></a>
      </div>
    </div>
    <br class="clearfloat">
  </div>
  
  <div id="image_editor_empty_text_area_container" style="display:none">
    <%= render :partial => 'image_editor/text_area' %>
  </div>
  
  <div id="info_container" data-current-textarea-identifier="1" data-used-in-private-lessons="<%= @image.media_elements_slides.any? %>"></div>
  
</div>
