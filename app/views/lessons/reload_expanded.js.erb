<% if @ok %>
  <% if !@ok_msg.blank? %>
    showOkPopUp('<%= j @ok_msg %>');
  <% end %>
  var target = $('#<%= @destination %>_<%= @lesson_id %>');
  var left = target.hasClass('lefth');
  <% js_content = j(render(:partial => "lessons/view_single_expanded", :locals => {:lesson => @lesson, :destination => @destination})) %>
  target.replaceWith("<%= js_content %>");
  if(left) {
    $('#<%= @destination %>_<%= @lesson_id %>').addClass('lefth');
  } else {
    $('#<%= @destination %>_<%= @lesson_id %>').addClass('righth');
  }
<% else %>
  showErrorPopUp('<%= j @error %>');
<% end %>
