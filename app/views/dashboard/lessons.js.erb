<%
  for_page = @for_row * 2
  destination = ButtonDestinations::EXPANDED_LESSON
%>

var container = $('#dashboard_container');
var margin = (container.width() - <%= @for_row %> * 300) / (<%= @for_row %> + 1);
emptyAllPagesInDashboard('lessons');
<% @lessons.each_with_index do |l, index| %>
  container.find('.space_lessons .page<%= ((index / for_page) + 1) %>').append("<%= j(render(:partial => 'lessons/view_single_expanded', :locals => {:lesson => l})) %>");
  $('#<%= destination %>_<%= l.id %>').css('margin-left', margin + 'px');
  <% if index % for_page >= @for_row %>
    $('#<%= destination %>_<%= l.id %>').css('margin-top', '30px');
  <% end %>
<% end %>
