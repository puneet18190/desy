<%
  lessons_full_page = @lessons_for_page * 2
   media_elements_full_page = @media_elements_for_page * 2
%>

var container = $('#dashboard_container');
var lessons = <%= @lessons.length %>;
var media_elements = <%= @media_elements.length %>;
container.data('lessons', lessons);
container.data('media-elements', media_elements);

container.find('.space_lessons .page1').html('');
container.find('.space_lessons .page2').html('');
container.find('.space_lessons .page3').html('');
<% @lessons.each_with_index do |l, index| %>
  <% lesson_page = (index / lessons_full_page) + 1 %>
  container.find('.space_lessons .page<%= lesson_page %>').append("<%= j(render(:partial => 'lessons/view_single_expanded', :locals => {:lesson => l})) %>");
  <% if index % lessons_full_page >= @lessons_for_page %>
    container.find('.space_lessons .page<%= lesson_page %>').last().css('margin-top', '40px');
  <% end %>
<% end %>

container.find('.space_media_elements .page1').html('');
container.find('.space_media_elements .page2').html('');
container.find('.space_media_elements .page3').html('');
<% @media_elements.each_with_index do |me, index| %>
  <% media_element_page = (index / media_elements_full_page) + 1 %>
  container.find('.space_media_elements .page<%= media_element_page %>').append("<%= j(render(:partial => 'media_elements/view_single_expanded', :locals => {:media_element => me, :destination => ButtonDestinations::EXPANDED_MEDIA_ELEMENT, :used_in_private_lessons => false})) %>");
  <% if index % media_elements_full_page >= @media_elements_for_page %>
    container.find('.space_media_elements .page<%= media_element_page %>').last().css('margin-top', '40px');
  <% end %>
<% end %>

resizeBothLessonsAndMediaElementsInDashboard(container, lessons, media_elements);
