
<!--

questo div ha un ID che ho creato per avere uno scope nei due elementi paginatori sotto FIXME, forse sarebbe meglio solo in questo caso usare gli onclick
la paginazione nella dashboard deve solo fa apparire e scomparire un div interno, che si chiama 'suggested_lessons_1' 'suggested_media_elements_1' etc
invece la paginazione nelle eltre pagine deve fare una chiamata ajax e sostituire il contenuto (la chiamata ajax da fare è data dall'helper add_page_parameter(page + 1, pagination_url), dove pagination
url è la url dove mi trovo)

nomenclatura dei div di paginazione:

ID="dashboard_lessons_pagination"
ID="dashboard_media_elements_pagination"
ID="<controller>_pagination" per le altre paginazioni

 -->

<div class="pagination" id="<%= (pagination_url == 'suggested_media_elements') ? 'dashboard_media_elements' : ((pagination_url == 'suggested_lessons') ? 'dashboard_lessons' : @where) %>_pagination">

<% if !first_page %>
  <div class="_left_paginator_<%= page %>">PRECEDENTE</div>
<% end %>
<% if !last_page && !first_page %>
 | 
<% end %>
<% if !last_page %>
  <div class="_right_paginator_<%= page %>">SUCCESSIVA</div>
<% end %>



</div>


<script type="text/javascript">
  // TODO quando sarà pronta la paginazione dinamica, questa funzione andrà rifatta
  // e spostata dentro un file apposito js, e richiamata dal file 'document_ready.js'
  // POSSIBILMENTE, TOCCARE SOLAMENTE QUESTO FILE E I FILES DI JAVASCRIPT
  
  $(document).ready(function() {
    
    $('#<%= (pagination_url == 'suggested_media_elements') ? 'dashboard_media_elements' : ((pagination_url == 'suggested_lessons') ? 'dashboard_lessons' : @where) %>_pagination ._left_paginator_<%= page %>').click(function() {
      <% if pagination_url == 'suggested_lessons' %>
        switchToSuggested('lesson', <%= page %>, <%= page - 1 %>);
      <% elsif pagination_url == 'suggested_media_elements' %>
        switchToSuggested('media_element', <%= page %>, <%= page - 1 %>);
      <% else %>
        var my_url = '<%= add_page_parameter(page - 1, pagination_url) %>';
        window.location.href = my_url;
      <% end %>
    });
    
    $('#<%= (pagination_url == 'suggested_media_elements') ? 'dashboard_media_elements' : ((pagination_url == 'suggested_lessons') ? 'dashboard_lessons' : @where) %>_pagination ._right_paginator_<%= page %>').click(function() {
      <% if pagination_url == 'suggested_lessons' %>
        switchToSuggested('lesson', <%= page %>, <%= page + 1 %>);
      <% elsif pagination_url == 'suggested_media_elements' %>
        switchToSuggested('media_element', <%= page %>, <%= page + 1 %>);
      <% else %>
        var my_url = '<%= add_page_parameter(page + 1, pagination_url) %>';
        window.location.href = my_url;
      <% end %>
    });
    
  });
  
  function switchToSuggested(type, old_pos, pos) {
    $('#suggested_' + type + 's_' + (old_pos)).css('display', 'none');
    $('#suggested_' + type + 's_' + (pos)).css('display', 'block');
  }
  
</script>
