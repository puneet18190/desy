<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app&#x2F;assets&#x2F;javascripts&#x2F;virtual_classroom.js - DESY</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="DESY"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/addDeleteItemToCurrentUrl.html">addDeleteItemToCurrentUrl</a></li>
            
                <li><a href="..&#x2F;classes/addEmailToVirtualClassroomSendLessonLinkSelector.html">addEmailToVirtualClassroomSendLessonLinkSelector</a></li>
            
                <li><a href="..&#x2F;classes/addLesson.html">addLesson</a></li>
            
                <li><a href="..&#x2F;classes/addLessonToVirtualClassroom.html">addLessonToVirtualClassroom</a></li>
            
                <li><a href="..&#x2F;classes/addMediaElement.html">addMediaElement</a></li>
            
                <li><a href="..&#x2F;classes/bindLoader.html">bindLoader</a></li>
            
                <li><a href="..&#x2F;classes/centerThis.html">centerThis</a></li>
            
                <li><a href="..&#x2F;classes/centerThisInContainer.html">centerThisInContainer</a></li>
            
                <li><a href="..&#x2F;classes/changePageDashboardLessons.html">changePageDashboardLessons</a></li>
            
                <li><a href="..&#x2F;classes/changePageDashboardMediaElements.html">changePageDashboardMediaElements</a></li>
            
                <li><a href="..&#x2F;classes/closeGenericVideoComponentCutter.html">closeGenericVideoComponentCutter</a></li>
            
                <li><a href="..&#x2F;classes/closePlaylistMenuInLessonViewer.html">closePlaylistMenuInLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/copyLesson.html">copyLesson</a></li>
            
                <li><a href="..&#x2F;classes/destroyLesson.html">destroyLesson</a></li>
            
                <li><a href="..&#x2F;classes/destroyMediaElement.html">destroyMediaElement</a></li>
            
                <li><a href="..&#x2F;classes/dislikeLesson.html">dislikeLesson</a></li>
            
                <li><a href="..&#x2F;classes/enlightTextarea.html">enlightTextarea</a></li>
            
                <li><a href="..&#x2F;classes/getDragPosition.html">getDragPosition</a></li>
            
                <li><a href="..&#x2F;classes/getHtmlPagination.html">getHtmlPagination</a></li>
            
                <li><a href="..&#x2F;classes/getLessonViewerCurrentSlide.html">getLessonViewerCurrentSlide</a></li>
            
                <li><a href="..&#x2F;classes/getRelativePositionInImageEditor.html">getRelativePositionInImageEditor</a></li>
            
                <li><a href="..&#x2F;classes/goToNextSlideInLessonViewer.html">goToNextSlideInLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/goToPrevSlideInLessonViewer.html">goToPrevSlideInLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/hideArrowsInLessonViewer.html">hideArrowsInLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/hideEverythingOutCurrentSlide.html">hideEverythingOutCurrentSlide</a></li>
            
                <li><a href="..&#x2F;classes/hideExpandedNotification.html">hideExpandedNotification</a></li>
            
                <li><a href="..&#x2F;classes/hideHelpButton.html">hideHelpButton</a></li>
            
                <li><a href="..&#x2F;classes/hideHelpTooltip.html">hideHelpTooltip</a></li>
            
                <li><a href="..&#x2F;classes/hideLoader.html">hideLoader</a></li>
            
                <li><a href="..&#x2F;classes/hideNewSlideChoice.html">hideNewSlideChoice</a></li>
            
                <li><a href="..&#x2F;classes/hideNotificationsButton.html">hideNotificationsButton</a></li>
            
                <li><a href="..&#x2F;classes/hideNotificationsFumetto.html">hideNotificationsFumetto</a></li>
            
                <li><a href="..&#x2F;classes/initializeHelp.html">initializeHelp</a></li>
            
                <li><a href="..&#x2F;classes/initializeLessonViewer.html">initializeLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/initializeNotAvailableLessonsToLoadQuick.html">initializeNotAvailableLessonsToLoadQuick</a></li>
            
                <li><a href="..&#x2F;classes/initializeNotifications.html">initializeNotifications</a></li>
            
                <li><a href="..&#x2F;classes/initializeSortableNavs.html">initializeSortableNavs</a></li>
            
                <li><a href="..&#x2F;classes/initializeVideoEditor.html">initializeVideoEditor</a></li>
            
                <li><a href="..&#x2F;classes/initLessonEditorPositions.html">initLessonEditorPositions</a></li>
            
                <li><a href="..&#x2F;classes/initMediaElementLoader.html">initMediaElementLoader</a></li>
            
                <li><a href="..&#x2F;classes/initNotificationsAutocomplete.html">initNotificationsAutocomplete</a></li>
            
                <li><a href="..&#x2F;classes/initTinymce.html">initTinymce</a></li>
            
                <li><a href="..&#x2F;classes/isHorizontalMask.html">isHorizontalMask</a></li>
            
                <li><a href="..&#x2F;classes/likeLesson.html">likeLesson</a></li>
            
                <li><a href="..&#x2F;classes/loadSlideAndAdhiacentInLessonEditor.html">loadSlideAndAdhiacentInLessonEditor</a></li>
            
                <li><a href="..&#x2F;classes/loadSlideInLessonEditor.html">loadSlideInLessonEditor</a></li>
            
                <li><a href="..&#x2F;classes/makeDraggable.html">makeDraggable</a></li>
            
                <li><a href="..&#x2F;classes/offlightTextarea.html">offlightTextarea</a></li>
            
                <li><a href="..&#x2F;classes/openAndLoadNextTr.html">openAndLoadNextTr</a></li>
            
                <li><a href="..&#x2F;classes/openPlaylistMenuInLessonViewer.html">openPlaylistMenuInLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/previewLesson.html">previewLesson</a></li>
            
                <li><a href="..&#x2F;classes/publishLesson.html">publishLesson</a></li>
            
                <li><a href="..&#x2F;classes/reInitializeSlidePositionsInLessonEditor.html">reInitializeSlidePositionsInLessonEditor</a></li>
            
                <li><a href="..&#x2F;classes/reloadDashboardPages.html">reloadDashboardPages</a></li>
            
                <li><a href="..&#x2F;classes/reloadLessonsDashboardPagination.html">reloadLessonsDashboardPagination</a></li>
            
                <li><a href="..&#x2F;classes/reloadMediaElementsDashboardPagination.html">reloadMediaElementsDashboardPagination</a></li>
            
                <li><a href="..&#x2F;classes/removeGalleryInLessonEditor.html">removeGalleryInLessonEditor</a></li>
            
                <li><a href="..&#x2F;classes/removeLesson.html">removeLesson</a></li>
            
                <li><a href="..&#x2F;classes/removeLessonFromVirtualClassroom.html">removeLessonFromVirtualClassroom</a></li>
            
                <li><a href="..&#x2F;classes/removeMediaElement.html">removeMediaElement</a></li>
            
                <li><a href="..&#x2F;classes/removeURLParameter.html">removeURLParameter</a></li>
            
                <li><a href="..&#x2F;classes/resetImageEditorCrop.html">resetImageEditorCrop</a></li>
            
                <li><a href="..&#x2F;classes/resetImageEditorOperationsChoice.html">resetImageEditorOperationsChoice</a></li>
            
                <li><a href="..&#x2F;classes/resetImageEditorTexts.html">resetImageEditorTexts</a></li>
            
                <li><a href="..&#x2F;classes/resetMediaElementChangeInfo.html">resetMediaElementChangeInfo</a></li>
            
                <li><a href="..&#x2F;classes/resizeHeight.html">resizeHeight</a></li>
            
                <li><a href="..&#x2F;classes/resizeWidth.html">resizeWidth</a></li>
            
                <li><a href="..&#x2F;classes/saveCurrentSlide.html">saveCurrentSlide</a></li>
            
                <li><a href="..&#x2F;classes/scrollPaneUpdate.html">scrollPaneUpdate</a></li>
            
                <li><a href="..&#x2F;classes/secondsToDateString.html">secondsToDateString</a></li>
            
                <li><a href="..&#x2F;classes/selectComponentInLessonViewerPlaylistMenu.html">selectComponentInLessonViewerPlaylistMenu</a></li>
            
                <li><a href="..&#x2F;classes/showEverythingOutCurrentSlide.html">showEverythingOutCurrentSlide</a></li>
            
                <li><a href="..&#x2F;classes/showGalleryInLessonEditor.html">showGalleryInLessonEditor</a></li>
            
                <li><a href="..&#x2F;classes/showHelpButton.html">showHelpButton</a></li>
            
                <li><a href="..&#x2F;classes/showHelpTooltip.html">showHelpTooltip</a></li>
            
                <li><a href="..&#x2F;classes/showLoader.html">showLoader</a></li>
            
                <li><a href="..&#x2F;classes/showNewSlideChoice.html">showNewSlideChoice</a></li>
            
                <li><a href="..&#x2F;classes/showNotificationsButton.html">showNotificationsButton</a></li>
            
                <li><a href="..&#x2F;classes/showNotificationsFumetto.html">showNotificationsFumetto</a></li>
            
                <li><a href="..&#x2F;classes/showNotificationsTooltip.html">showNotificationsTooltip</a></li>
            
                <li><a href="..&#x2F;classes/slideError.html">slideError</a></li>
            
                <li><a href="..&#x2F;classes/slideTo.html">slideTo</a></li>
            
                <li><a href="..&#x2F;classes/slideToInLessonViewer.html">slideToInLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/slideToInLessonViewerWithLessonSwitch.html">slideToInLessonViewerWithLessonSwitch</a></li>
            
                <li><a href="..&#x2F;classes/stopMediaInCurrentSlide.html">stopMediaInCurrentSlide</a></li>
            
                <li><a href="..&#x2F;classes/stopMediaInLessonViewer.html">stopMediaInLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/submitCurrentSlideForm.html">submitCurrentSlideForm</a></li>
            
                <li><a href="..&#x2F;classes/switchLessonInPlaylistMenuLessonViewer.html">switchLessonInPlaylistMenuLessonViewer</a></li>
            
                <li><a href="..&#x2F;classes/switchToSuggestedLessons.html">switchToSuggestedLessons</a></li>
            
                <li><a href="..&#x2F;classes/switchToSuggestedMediaElements.html">switchToSuggestedMediaElements</a></li>
            
                <li><a href="..&#x2F;classes/textAreaImageEditorContent.html">textAreaImageEditorContent</a></li>
            
                <li><a href="..&#x2F;classes/tinyMceCallbacks.html">tinyMceCallbacks</a></li>
            
                <li><a href="..&#x2F;classes/tinyMceKeyDownCallbacks.html">tinyMceKeyDownCallbacks</a></li>
            
                <li><a href="..&#x2F;classes/unbindLoader.html">unbindLoader</a></li>
            
                <li><a href="..&#x2F;classes/unpublishLesson.html">unpublishLesson</a></li>
            
                <li><a href="..&#x2F;classes/updateURLParameter.html">updateURLParameter</a></li>
            
                <li><a href="..&#x2F;classes/uploadDone.html">uploadDone</a></li>
            
                <li><a href="..&#x2F;classes/uploadMediaElementLoadeDoneRedirect.html">uploadMediaElementLoadeDoneRedirect</a></li>
            
                <li><a href="..&#x2F;classes/uploadMediaElementLoaderError.html">uploadMediaElementLoaderError</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Administration.html">Administration</a></li>
            
                <li><a href="..&#x2F;modules/AjaxLoader.html">AjaxLoader</a></li>
            
                <li><a href="..&#x2F;modules/Buttons.html">Buttons</a></li>
            
                <li><a href="..&#x2F;modules/Dashboard.html">Dashboard</a></li>
            
                <li><a href="..&#x2F;modules/General.html">General</a></li>
            
                <li><a href="..&#x2F;modules/ImageEditor.html">ImageEditor</a></li>
            
                <li><a href="..&#x2F;modules/LessonEditor.html">LessonEditor</a></li>
            
                <li><a href="..&#x2F;modules/LessonViewer.html">LessonViewer</a></li>
            
                <li><a href="..&#x2F;modules/MediaElementLoader.html">MediaElementLoader</a></li>
            
                <li><a href="..&#x2F;modules/Notifications.html">Notifications</a></li>
            
                <li><a href="..&#x2F;modules/Times.html">Times</a></li>
            
                <li><a href="..&#x2F;modules/VideoEditor.html">VideoEditor</a></li>
            
                <li><a href="..&#x2F;modules/VirtualClassroom.html">VirtualClassroom</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app&#x2F;assets&#x2F;javascripts&#x2F;virtual_classroom.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
* It&#x27;s where users can share their lessons.
* It handles share lessons link and add to playlist actions.
* 
* @module VirtualClassroom
*&#x2F;

&#x2F;**
* Add email to recipients list on email add button (+).
* 
* @method addEmailToVirtualClassroomSendLessonLinkSelector
* @for addEmailToVirtualClassroomSendLessonLinkSelector
*&#x2F;
function addEmailToVirtualClassroomSendLessonLinkSelector() {
  var selector = $(&#x27;#virtual_classroom_emails_selector&#x27;);
  if(!selector.data(&#x27;placeholdered&#x27;) &amp;&amp; selector.val() != &#x27;&#x27;) {
    $(&#x27;#virtual_classroom_send_link_mails_box .jspPane&#x27;).append(&#x27;&lt;div class=&quot;_email&quot;&gt;&lt;span class=&quot;_text&quot;&gt;&#x27; + selector.val() + &#x27;&lt;&#x2F;span&gt;&lt;a class=&quot;_remove&quot;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;&#x27;);
    selector.val(&#x27;&#x27;);
  }
}

&#x2F;**
* JS-TODO
* 
* @method initializeNotAvailableLessonsToLoadQuick
* @for initializeNotAvailableLessonsToLoadQuick
*&#x2F;
function initializeNotAvailableLessonsToLoadQuick() {
  $(&#x27;._virtual_classroom_quick_loaded_lesson&#x27;).each(function() {
    if(!$(this).data(&#x27;available&#x27;)) {
      $(&#x27;#&#x27; + this.id + &#x27; ._lesson_thumb&#x27;).addClass(&#x27;current&#x27;);
    }
  });
}

function initializeScrollPaneQuickLessonSelector() {
  $(&#x27;#virtual_classroom_quick_select_container.scroll-pane&#x27;).bind(&#x27;jsp-arrow-change&#x27;, function(event, isAtTop, isAtBottom, isAtLeft, isAtRight) {
    var page = $(&#x27;#virtual_classroom_quick_select_container&#x27;).data(&#x27;page&#x27;);
    var tot_pages = $(&#x27;#virtual_classroom_quick_select_container&#x27;).data(&#x27;tot-pages&#x27;);
    if(isAtBottom &amp;&amp; (page &lt; tot_pages)) {
      $.get(&#x27;&#x2F;virtual_classroom&#x2F;select_lessons_new_block?page=&#x27; + (page + 1));
    }
  });
}

function initializeVirtualClassroom() {
  $(&#x27;._virtual_classroom_lesson&#x27;).each(function() {
    if($(this).data(&#x27;in-playlist&#x27;)) {
      $(&#x27;#&#x27; + this.id + &#x27; ._lesson_thumb&#x27;).addClass(&#x27;current&#x27;);
    } else {
      initializeDraggableVirtualClassroomLesson(this.id);
    }
  });
  initializePlaylist();
}

function initializeDraggableVirtualClassroomLesson(id) {
  var lesson_cover = $(&#x27;#&#x27; + id + &#x27; ._lesson_thumb&#x27;);
  var object = $(&#x27;#&#x27; + id);
  if(object.hasClass(&#x27;ui-draggable&#x27;)) {
    object.draggable(&#x27;enable&#x27;);
  } else {
    object.draggable({
      revert: true,
      handle: &#x27;._lesson_thumb&#x27;,
      cursor: &#x27;move&#x27;,
      containment: &#x27;.griglia-contenuti&#x27;,
      helper: function() {
        var current_z_index = getMaximumZIndex(&#x27;_virtual_classroom_lesson&#x27;) + 1;
        var div_to_return = $(&#x27;#&#x27; + this.id + &#x27; ._lesson_thumb&#x27;)[0].outerHTML;
        div_to_return = &#x27;&lt;div &#x27; + &#x27;style=&quot;&#x27; + current_z_index + &#x27;;outline:1px solid white&quot; &#x27; + div_to_return.substr(5,div_to_return.length);
        return div_to_return;
      },
      start: function() {
        lesson_cover.addClass(&#x27;current&#x27;);
      },
      stop: function(event, ui) {
        if(!ui.helper.hasClass(&#x27;_lesson_dropped&#x27;)) {
          lesson_cover.removeClass(&#x27;current&#x27;);
        }
      }
    });
  }
  if(lesson_cover.hasClass(&#x27;current&#x27;)) {
    lesson_cover.removeClass(&#x27;current&#x27;);
  }
  if(object.data(&#x27;in-playlist&#x27;)) {
    object.data(&#x27;in-playlist&#x27;, false);
  }
}

function initializePlaylist() {
  $(&#x27;#lessons_list_in_playlist&#x27;).jScrollPane({
    autoReinitialise: true
  });
  $(&#x27;#virtual_classroom_playlist&#x27;).droppable({
    accept: &#x27;._virtual_classroom_lesson&#x27;,
    drop: function(event, ui) {
      ui.helper.hide();
      ui.helper.addClass(&#x27;_lesson_dropped&#x27;);
      $.ajax({
        type: &#x27;post&#x27;,
        url: &#x27;&#x2F;virtual_classroom&#x2F;&#x27; + ui.draggable.data(&#x27;lesson-id&#x27;) + &#x27;&#x2F;add_lesson_to_playlist&#x27;
      });
    },
    hoverClass: &#x27;current&#x27;
  });
  $(&#x27;#virtual_classroom_playlist .jspPane&#x27;).sortable({
    scroll: true,
    handle: &#x27;._lesson_in_playlist&#x27;,
    axis: &#x27;y&#x27;,
    cursor: &#x27;move&#x27;,
    cancel: &#x27;._remove_lesson_from_playlist&#x27;,
    helper: function(event, ui) {
      var current_z_index = getMaximumZIndex(&#x27;_lesson_in_playlist&#x27;) + 1;
      var div_to_return = $($(&#x27;#&#x27; + ui.attr(&#x27;id&#x27;))[0].outerHTML);
      div_to_return.addClass(&#x27;current&#x27;);
      div_to_return = div_to_return[0].outerHTML;
      var my_index = div_to_return.indexOf(&#x27;&lt;div class=&quot;_remove_lesson_from_playlist&#x27;);
      var second_half_string = div_to_return.substring(my_index, div_to_return.length);
      var my_second_index = my_index + second_half_string.indexOf(&#x27;&lt;&#x2F;div&gt;&#x27;) + 6;
      return div_to_return.substring(0, (my_index - 1)) + div_to_return.substring((my_second_index + 1), div_to_return.length);
    },
    stop: function(event, ui) {
      var previous = ui.item.prev();
      var new_position = 0;
      var old_position = ui.item.data(&#x27;position&#x27;);
      if(previous.length == 0) {
        new_position = 1;
      } else {
        var previous_item_position = previous.data(&#x27;position&#x27;);
        if(old_position &gt; previous_item_position) {
          new_position = previous_item_position + 1;
        } else {
          new_position = previous_item_position;
        }
      }
      if(old_position != new_position) {
        $.ajax({
          type: &#x27;post&#x27;,
          url: &#x27;&#x2F;virtual_classroom&#x2F;&#x27; + ui.item.data(&#x27;lesson-id&#x27;) + &#x27;&#x2F;playlist&#x2F;&#x27; + new_position + &#x27;&#x2F;change_position&#x27;
        });
      }
    }
  });
}

function getMaximumZIndex(a_class) {
  var index_highest = 0;
  $(&#x27;.&#x27; + a_class).each(function() {
    var index_current = parseInt($(this).css(&quot;zIndex&quot;), 10);
    if(index_current &gt; index_highest) {
      index_highest = index_current;
    }
  });
  return index_highest;
}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
